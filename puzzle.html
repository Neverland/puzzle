<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
	<style type="text/css">
		*{ padding: 0; margin: 0;}
		li { list-style: none; }
		button { padding: 10px; font-size: 14px; }
		.box { width: 600px; margin: 0 auto 10px; }
		#puzzle {  height: 600px; overflow: hidden; }
		#puzzle ul  { overflow: hidden; height: 100%; }
		#puzzle li { width: 198px; height: 198px; float: left; border: solid 1px red; }
		#preview img { width: 300; height: 300px;}
	</style>
</head>
<body style="padding: 100px 0; ">

<script type="text/javascript">
	/*
	*   http://www.cnblogs.com/enix/
	*   使用请联系enix@foxmail.com
	*
	* */

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('z 2t(b,e,j,f){G(!(D 2l H.S)){F 2b H.S(b,e,j,f)}B i,h,c,a,g,d;(h=O,c=D,a=h.2e(),g=[].2f,d=[0,1,2,3,4,5,6,7,8],i=H.S);c.C=c.R=c.27=c.I=c.Q=c.1p=c.1s=T;i.A=i.2o;i.A.2O=i;i.P=T;i.A.26=z(){1e f==="z"&&(c.A=f);c.17=[[],[]];c.C=["J","J","J","J","J","J","J","J","J"];c.24();c.I=h.2P(b);c.27=d.1k();c.Q=e;c.R=c.21([0,1,2,3,4,5,6,7,8]);c.1Z();c.I.11(c.1X());c.1V();c.1C()};i.A.1Z=z(l){B k=2b 2i(),m=h.1T("1S");k.2q=z(){};k.Q=c.Q;"z"===1e l&&(l())};i.A.1X=z(){B m=0,l=c.C.14,k=c.1f("2Q");Z(;m<l;){c.C[m]=c.1f(c.C[m]);c.C[m].16=c.R[m];c.C[m].i=m;a.11(c.C[m++])}k.11(a);F k};i.A.1C=z(){c.1g(c.I,"1R",c.12,L);F L};i.A.1V=z(){B k=c.C.14;Z(;k--;c.C[k].E.2E=\'2G: 2H("\'+c.Q+\'") 2K-2L \'+(-c.17[0][c.R[k]]*j)+"1b "+(-c.17[1][c.R[k]]*j)+"1b"){}};i.A.21=z(){d=d||[0,1,2,3,4,5,6,7,8,9];G(({}).1k.1Q(d).2X("2Z")===-1){F}B k=[],l=d.1k();k=d.1B(z(){F 1x.2g()>0.5?-1:1});(k.1k()===l)&&H.S(d);F k};i.A.24=z(){B k=9;Z(;k--;){c.17[0][k]=k%3;c.17[1][k]=2h(k/3)%3}};i.A.1f=z(k){c.13||(c.13={});c.13[k]||(c.13[k]=h.1T(k));F c.13[k].1P(1l)};i.A.12=z(l){l=c.15(l);B k=c.1O(l);30(k&&k.2D!==1){k=k.K}c.1s=c.1L();({1R:z(m){m=c.15(m);c.1c(m);G(k.2I.2J()!=="J"||k.K.K!==c.I){F}i.P=k;c.1o=c.X(k);c.1q=[m.1r-c.1o.N,m.1t-c.1o.M];c.1K(k);c.1g(c.I,"1v",c.12,L);c.1g(c.I,"1I",c.12,L)},1v:z(n){n=c.15(n);c.1c(n);B m=i.P;c.18=c.X(m.K.K);G(c.19.2k===0){c.19.E.1F="2n"}c.1U.1Q(m,n)},1I:z(o){c.1c(o);c.1D(c.I,"1v",c.12,L);B n=i.P,m=c.X(n);G(m.U<c.18.N||m.W<c.18.M||m.N>c.18.U||m.M>c.18.W){c.1j()}1i{c.1E(o)}n.E.1h=1;n.E.1G="1H(1h=2M)";n&&(2N n);1w{(c.16.1J("")===c.R.1B().1J("")&&c.1p===T)&&(c.A(),c.1p=1)}1u(o){c.1j()}}})[l.2V](l);F L};i.A.1j=z(){B l=i.P,m=c.19;1w{m.K.2W(m)}1u(k){}l.E.1n="1M"};i.A.1E=z(m){m=c.15(m);B l=c.C.14,k=T,n=[m.1r,m.1t];Z(;l--;){k=c.X(c.C[l]);G(k.M<n[1]&&k.W>n[1]){G(k.N<n[0]&&k.U>n[0]){c.C[l]===i.P||c.1N(c.C[l])}1i{c.1j()}}}};i.A.1N=z(t){B u=i.P,v=c.C,s=c.R,y,p=0,o=0,n=[-1,-1],m=T,l=-1,q=[],w=c.I.2m[0],x;u.E.1n="1M";c.16=[];Z(;o<v.14;o++){G(t===c.C[o]){n[0]=o}G(u===c.C[o]){n[1]=o}}n.1B();m=v[n[0]];v[n[0]]=v[n[1]];v[n[1]]=m;l=s[n[0]];s[n[0]]=s[n[1]];s[n[1]]=l;w.1y="";Z(;p<v.14;p++){x=c.C[p];c.16.2p(c.C[p].16);1w{w.11(x)}1u(r){}}};i.A.1U=z(p){B q=[p.1r,p.1t],o=D.K.K,k=[o.2r,o.2s],n=c.X(D),l,m;l=1x.1W(q[0]-c.1q[0],0);m=1x.1W(q[1]-c.1q[1],0);D.E.M=c.1s[1]+m+"1b";D.E.N=l+"1b";D.E.2u="2v";D.E.2w="20";D.E.1n="2x";D.E.1h=0.8;D.E.1G="1H(1h=2y)"};i.A.1K=z(k){B l=k.1P(1l);l.1y="";l.E.1F="2z";l.2A="19";k.K.2B(l,k);c.19=l};i.A.2C=z(){B k=c.1f("1S");k.Q=c.Q;c.I.1y="";c.I.11(k)};i.A.1L=z(){B k=[0,0];G(1a.1Y){k=[1a.2F,1a.1Y]}1i{G(1e O.1d.10!="22"&&O.1d.10>0){k=[O.1d.23,O.1d.10]}1i{G(1e O.1m.10!="22"){k=[O.1m.23,O.1m.10]}}}F k};i.A.1g=z(o,n,m,l){B k=H.S;o.25&&(k=z(r,q,p){r.25("V"+q,p)}).Y(D,H);o.28&&(k=z(r,q,p){r.28(q,p,l||L)}).Y(D,H);o["V"+n]&&(k=z(r,q,p){r["V"+q]=z(){p()}}).Y(D,H)};i.A.1D=z(o,n,m,l){B k=H.S;o.29&&(k=z(r,q,p){r.29("V"+q,p)}).Y(D,H);o.2a&&(k=z(r,q,p){r.2a(q,p,l||L)}).Y(D,H);o["V"+n]&&(k=z(r,q,p){r["V"+q]=T}).Y(D,H)};i.A.15=z(k){F k||1a.2R};i.A.1O=z(k){F k.2S||k.2T};i.A.X=z(k){B m=k.2U(),l=(l={N:m.N,U:m.U,M:m.M,W:m.W,1z:(m.1z?m.1z:(m.W-m.M)),1A:(m.1A?m.1A:(m.U-m.N))});F l};i.A.1c=z(k){k.2c&&(k.2c=L,k.2Y=1l);k.2d&&(k.2d(),k.2j())};c.26()};',62,187,'|||||||||||||||||||||||||||||||||||function|fn|var|htmls|this|style|return|if|arguments|parent|li|parentNode|false|top|left|document|currentTarget|src|sn|callee|null|right|on|bottom|getClinetRect|apply|for|scrollTop|appendChild|mousemoveCheckThreshold|element|length|getEvent|index|xy|reffer|placeholder|window|px|stopEvent|documentElement|typeof|getHtmlElement|addEvent|opacity|else|restore|toString|true|body|position|pos|calls|origin|clientX|scroll|clientY|catch|mousemove|try|Math|innerHTML|height|width|sort|activity|removeEvent|checkPosition|display|filter|alpha|mouseup|join|createPlaceholder|getScrollPosition|static|replaceElement|getTarget|cloneNode|call|mousedown|img|createElement|areaMove|setPuzzleBK|max|puzzleCreate|pageYOffset|preloadImg||unordered|undefined|scrollLeft|getRC|attachEvent|init|value|addEventListener|detachEvent|removeEventListener|new|returnValue|preventDefault|createDocumentFragment|slice|random|parseInt|Image|stopPropagation|offsetWidth|instanceof|children|block|prototype|push|onload|scrollWidth|scrollHeight|Puzzle|cursor|crosshair|zIndex|absolute|80|none|className|insertBefore|done|nodeType|cssText|pageXOffset|background|url|nodeName|toLowerCase|no|repeat|100|delete|constructor|getElementById|ul|event|srcElement|target|getBoundingClientRect|type|removeChild|indexOf|cancelBubble|Array|while'.split('|'),0,{}))</script>
    <div class="box">
	    <h1>javascript puzzle</h1>
	    <ul>
		    <li>1.用鼠标拖动单元格放置位置</li>
		    <li>2.图片都摆放至合适位置后会完成图片。</li>
	    </ul>
    </div>
    <div id="puzzle" class="box"></div>
	<div class="box">
		<button id="recreate">换图</button>
		<button id="done">直接完成</button>
	</div>
	<div class="box">由于网速原因，有些图片可能加载过慢，请耐心等待，支持任意分辨率尺寸的图片</div>
	<h2  class="box">原图预览</h2>
	<div id="preview" class="box"></div>
	<script type="text/javascript">

        (function (window,doc,undefined){

	        var items=['recreate','done'] ,puzzle,i=items.length ,preview=doc.getElementById('preview'),
			        src=[
				        'http://imgsrc.baidu.com/forum/pic/item/677b8210e8c54b2e213f2e9a.jpg',
				        'http://img.blog.163.com/photo/i3Ini93V0YII1QqyDv26Pg==/4264908847121048785.jpg',
				        'http://image.photophoto.cn/nm-10/001/064/0010640209.jpg',
				        'http://www.51mingche.com/uploads/allimg/110413/223U03T4-1.jpg',
				        'http://www.photophoto.cn/m1/001/002/0010020057.jpg',
				        'http://www.wodegame.com/upimg/pic13/2009921851414677802.png',
				        'http://bbscache.artron.net/day_090228/20090228_f632616a932d32fd9ffeZr3m06vxGcxK.jpg',
				        'http://www.tjrb.com.cn/rollnews/wy/201003/W020100330347907255000.JPG',
				        'http://image.photophoto.cn/nm-2/001/035/0010350208.jpg',
				        'http://pic9.nipic.com/20100811/46537_104312044536_2.jpg',
			        ];

	        puzzle=Puzzle('puzzle',src[9],'200',function(){
		        alert('恭喜你完成拼图');
		        puzzle.done();
	        });
	        preview.innerHTML='<img src="'+src[9]+'" />';

	        while(i>0){
		        doc.getElementById(items[--i]).onclick=function(){
			        ({
				        'recreate':function(){
					        var SRC=src[Math.random().toFixed(1) * 10];

					        puzzle.src=SRC;
					        puzzle.preloadImg(function(){
						        preview.innerHTML='<img src="'+puzzle.src+'" />';
						        puzzle.setPuzzleBK();
					        });
				        },
				        'done' : function(){
					        puzzle.done();
				        }
			        })[this.id]();
		        }
	        }


        })(window,document);
    </script>

</body>
</html>